<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <reference id="jpaTemplate" interface="org.apache.aries.jpa.template.JpaTemplate" filter="(osgi.unit.name=PU)"/>
    <reference id="datasource" interface="javax.sql.DataSource"
               filter="(osgi.jndi.service.name=jdbc/ru.training.model.model-datasource)"/>

    <bean id="userRepo" class="ru.training.karaf.repo.UserRepoImpl">
        <argument ref="jpaTemplate"/>
    </bean>
    <bean id="locationRepo" class="ru.training.karaf.repo.LocationRepoImpl">
        <argument ref="jpaTemplate"/>
        <argument ref="datasource"/>
    </bean>
    <bean id="unitRepo" class="ru.training.karaf.repo.UnitRepoIml">
        <argument ref="jpaTemplate"/>
    </bean>
    <bean id="paramRepo" class="ru.training.karaf.repo.ClimateParameterRepoImpl">
            <argument ref="jpaTemplate"/>
    </bean>
    <bean id="typeRepo" class="ru.training.karaf.repo.SensorTypeRepoImpl">
        <argument ref="jpaTemplate"/>
    </bean>
    <bean id="sensorRepo" class="ru.training.karaf.repo.SensorRepoImpl">
        <argument ref="jpaTemplate"/>
    </bean>
    <bean id="measuringRepo" class="ru.training.karaf.repo.MeasuringRepoImpl">
            <argument ref="jpaTemplate"/>
    </bean>
    <bean id="roleRepo" class="ru.training.karaf.repo.RoleRepoImpl">
            <argument ref="jpaTemplate"/>
    </bean>



    <bean id="uniqueValidationRepo" class="ru.training.karaf.repo.UniqueValidationRepoImpl">
        <argument ref="jpaTemplate"/>
    </bean>
    <service ref="userRepo" interface="ru.training.karaf.repo.UserRepo"/>
    <service ref="locationRepo" interface="ru.training.karaf.repo.LocationRepo"/>
    <service ref="unitRepo" interface="ru.training.karaf.repo.UnitRepo"/>
    <service ref="paramRepo" interface="ru.training.karaf.repo.ClimateParameterRepo"/>
    <service ref="typeRepo" interface="ru.training.karaf.repo.SensorTypeRepo"/>
    <service ref="sensorRepo" interface="ru.training.karaf.repo.SensorRepo"/>
    <service ref="measuringRepo" interface="ru.training.karaf.repo.MeasuringRepo"/>
    <service ref="roleRepo" interface="ru.training.karaf.repo.RoleRepo"/>

    <service ref="uniqueValidationRepo" interface="ru.training.karaf.repo.UniqueValidationRepo"/>

</blueprint>
